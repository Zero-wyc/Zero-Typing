!function(){var e=document.createElement("style");e.innerHTML='.Monkey{margin-top:50px}.Monkey .word-count-radio{padding:0 0 30px 30px}.Monkey .word-count-radio .ant-radio-button-wrapper{color:var(--head-text-color);background-color:transparent;border:none;opacity:.5}.Monkey .word-count-radio .ant-radio-button-wrapper.ant-radio-button-wrapper-checked{color:var(--word-count-checked-color)}.Monkey .word-count-radio .ant-radio-button-wrapper:not(:first-child):before{background-color:transparent;color:var(--head-text-color);content:"/"}.Monkey .caret{position:absolute;width:3px;height:30px;border-radius:10px;background-color:var(--monkey-caret-color);animation-iteration-count:infinite;animation-duration:1s;transition:transform .25s;transform:translate3d(26px,7px,0)}.Monkey .caret.flash{animation-name:caretFlash}.Monkey .caret.hide{display:none}.Monkey .type-main-box{transition:opacity .15s;opacity:1}.Monkey .type-main-box.fading{opacity:0}.Monkey .type-main-box.hide{display:none}.Monkey .words-box{font-size:22px;display:flex;flex-wrap:wrap;width:100%;align-content:flex-start;color:var(--head-text-color);overflow:hidden;user-select:none;min-width:920px}.Monkey .words-box .word{margin:7px;opacity:.8}.Monkey .words-box .word.correct{color:var(--primary-color);opacity:1}.Monkey .words-box .word.wrong{color:var(--monkey-error-color);opacity:1}.Monkey .words-box .word .label{font-size:16px;line-height:16px;text-align:center;position:relative;top:3px;color:var(--monkey-sub-color)}.Monkey .words-box .word .letter{display:inline-block;width:14px;opacity:.6}.Monkey .words-box .word .letter.correct{color:var(--primary-color);opacity:1}.Monkey .words-box .word .letter.wrong{color:var(--monkey-error-color);opacity:1}.Monkey .hidden-input{position:absolute;left:-100vw}.Monkey .tip-line{margin-top:50px;font-size:12px;text-align:center;color:var(--head-text-color);opacity:.5;transition:opacity .5s linear}.Monkey .tip-line code{padding:1px 3px;margin:0 3px;border-radius:2px;background-color:var(--head-text-color);color:var(--bg-color)}.Monkey .tip-line.hide{opacity:0}.Monkey .type-result-box{display:none}.Monkey .type-result-box.show{display:block}.Monkey .reload-line{margin-top:80px;text-align:center}@keyframes caretFlash{0%,to{opacity:0}50%{opacity:1}}\n',document.head.appendChild(e),System.register(["./index-legacy.5a2d6e22.js","./wordTool-legacy.14606858.js","./ReloadBtn-legacy.dd137912.js"],(function(e){"use strict";var r,t,o,n,i,l,s,c,a;return{setters:[function(e){r=e.U,t=e.r,o=e.V,n=e.a6,i=e.X,l=e.Y},function(e){s=e.w},function(e){c=e.R,a=e.T}],execute:function(){var d="F:\\Code\\typing-Zero-wyc\\src\\views\\monkey\\Monkey.tsx";const u=e=>Array.from(e.children);e("default",r((e=>{const r=t.exports.useRef(null),m=t.exports.useRef(null),p=t.exports.useRef(null),x=t.exports.useRef(s.getWords(e.$state.root.wordsMode,e.$state.root.customerWords)),b=t.exports.useRef([0,0]),N=t.exports.useRef({wpm:"",right:0,wrong:0,acc:0,time:{begin:0,secs:0}}),[f,v]=t.exports.useState(!1),[h,y]=t.exports.useState(!1),[g,w]=t.exports.useState(!1),[k,C]=t.exports.useState(!1),[E,M]=t.exports.useState(""),[j,D]=t.exports.useState([]),[V,A]=t.exports.useState({top:0,left:0}),[B,S]=t.exports.useState(30),$=()=>{const e=b.current,r=m.current.getBoundingClientRect(),t=u(m.current)[e[0]];if(!t)return;const o=Array.from(t.getElementsByClassName("letter"));if(o.length<=e[1]){const t=o[e[1]-1].getBoundingClientRect();A({top:t.top-r.top+2,left:t.left-r.left+t.width})}else{const t=o[e[1]].getBoundingClientRect();A({top:t.top-r.top+2,left:t.left-r.left})}},R=t.exports.useCallback(((e,r)=>{const t=b.current,o=""===E||" "===E.charAt(E.length-1);let n;if(32===e)n=o?t:[t[0]+1,0];else{if(t[1]>=j[t[0]].letterArr.length){const e=u(m.current)[t[0]],o=document.createElement("code");o.className="letter wrong extra-letter",o.innerText=r,e.appendChild(o)}n=[t[0],t[1]+1]}b.current=n,$(),D((i=>{const l=i[t[0]].letterArr[t[1]];if(l&&32!==e&&(l.isCorrect=r===l.letter,i[t[0]].letterArr[t[1]]=l),32===e&&!o)if(i[t[0]].letterArr.some((e=>null===e.isCorrect)))i[t[0]].isSkip=!0,i[t[0]].isCorrect=!1;else{const e=u(m.current)[t[0]].getElementsByClassName("extra-letter");e&&0!==e.length?i[t[0]].isCorrect=!1:i[t[0]].isCorrect=i[t[0]].letterArr.every((e=>e.isCorrect))}return(n[0]>i.length-1||t[0]===i.length-1&&t[1]===i[t[0]].letterArr.length-1)&&(i[t[0]].isCorrect=i[t[0]].letterArr.every((e=>e.isCorrect)),N.current.right=i.filter((e=>e.isCorrect)).length,N.current.wrong=i.length-N.current.right,N.current.acc=Math.round(N.current.right/(N.current.right+N.current.wrong)*100),N.current.time.secs=Math.round((Date.now()-N.current.time.begin)/1e3),N.current.wpm=(N.current.right/(N.current.time.secs/60)).toFixed(2),v(!1),w(!0),setTimeout((()=>{C(!0)}),150)),i})),M((t=>32!==e||""!==t&&" "!==t.charAt(t.length-1)?t+r:t))}),[E,j]),T=t.exports.useCallback((()=>{const e=E.charAt(E.length-1);if(""===e)return;const r=b.current;let t;if(" "===e)if(j[r[0]-1].isCorrect)t=r;else if(j[r[0]-1].isSkip){const e=j[r[0]-1].letterArr.findIndex((e=>null===e.isCorrect));t=[r[0]-1,e]}else{const e=u(m.current)[r[0]-1].getElementsByClassName("letter");t=[r[0]-1,e.length]}else{const e=u(m.current)[r[0]],o=e.getElementsByClassName("extra-letter");o&&o.length>0&&e.removeChild(o[o.length-1]),t=[r[0],r[1]-1]}b.current=t,$(),D((t=>(" "===e?!1===t[r[0]-1].isCorrect&&(t[r[0]-1].isCorrect=null):t[r[0]].letterArr.length>=r[1]&&(t[r[0]].letterArr[r[1]-1].isCorrect=null,t[r[0]].isCorrect=null),t))),M((t=>{let o=!0;return" "===e&&j[r[0]-1].isCorrect&&(o=!1),o?t.substring(0,t.length-1):t}))}),[E,j]),W=()=>{v(!0),r.current.focus()},F=t.exports.useCallback((()=>{b.current=[0,0],x.current=s.shuffle(x.current),N.current={wpm:"",right:0,wrong:0,acc:0,time:{begin:0,secs:0}};const e=m.current.getElementsByClassName("extra-letter");0!==e.length&&Array.from(e).forEach((e=>{e.parentNode.removeChild(e)})),D(s.jsonCopy(x.current.slice(0,B)).map((e=>Object.assign({},e,{letterArr:Array.from(e.text).map((e=>({letter:e,isCorrect:null}))),isCorrect:null,isSkip:!1})))),M(""),w(!1),C(!1),setTimeout((()=>{W(),$()}),10)}),[B]);return t.exports.useEffect((()=>{x.current=s.getWords(e.$state.root.wordsMode,e.$state.root.customerWords),F()}),[e.$state.root.wordsMode,e.$state.root.customerWords,F,B]),o.exports.jsxDEV("div",{className:"Monkey",children:[o.exports.jsxDEV("div",{className:"word-count-radio",children:o.exports.jsxDEV(n.Group,{value:B,size:"small",onChange:e=>{S(e.target.value)},children:[o.exports.jsxDEV(n.Button,{tabIndex:-1,value:20,children:"20"},void 0,!1,{fileName:d,lineNumber:299,columnNumber:21},void 0),o.exports.jsxDEV(n.Button,{tabIndex:-1,value:30,children:"30"},void 0,!1,{fileName:d,lineNumber:302,columnNumber:21},void 0),o.exports.jsxDEV(n.Button,{tabIndex:-1,value:40,children:"40"},void 0,!1,{fileName:d,lineNumber:305,columnNumber:21},void 0),o.exports.jsxDEV(n.Button,{tabIndex:-1,value:50,children:"50"},void 0,!1,{fileName:d,lineNumber:308,columnNumber:21},void 0)]},void 0,!0,{fileName:d,lineNumber:292,columnNumber:17},void 0)},void 0,!1,{fileName:d,lineNumber:291,columnNumber:13},void 0),o.exports.jsxDEV(i,{justify:"center",align:"middle",children:[o.exports.jsxDEV(l,{flex:"900px",className:`type-main-box ${g?"fading":""} ${k?"hide":""}`,children:[o.exports.jsxDEV("div",{className:"caret "+(f?h?"flash":"":"hide"),ref:p,style:{transform:`translate3d(${V.left}px,${V.top}px,0)`}},void 0,!1,{fileName:d,lineNumber:320,columnNumber:21},void 0),o.exports.jsxDEV("div",{className:"words-box",onClick:W,ref:m,children:j.map(((e,r)=>o.exports.jsxDEV("div",{className:"word "+(e.isCorrect?"correct":!1===e.isCorrect?"wrong":""),children:[o.exports.jsxDEV("div",{className:"label",children:e.label},void 0,!1,{fileName:d,lineNumber:339,columnNumber:33},void 0),e.letterArr?.map(((e,t)=>o.exports.jsxDEV("code",{className:"letter "+(e.isCorrect?"correct":!1===e.isCorrect?"wrong":""),children:e.letter},`${r}_${t}`,!1,{fileName:d,lineNumber:341,columnNumber:37},void 0)))]},r,!0,{fileName:d,lineNumber:329,columnNumber:29},void 0)))},void 0,!1,{fileName:d,lineNumber:327,columnNumber:21},void 0),o.exports.jsxDEV("input",{className:"hidden-input",type:"text",ref:r,onKeyDown:e=>{9!==e.keyCode&&(e.preventDefault(),e.stopPropagation(),e.persist()),k||(y(!1),1===e.key.length?(0===N.current.time.begin&&(N.current.time.begin=Date.now()),R(e.keyCode,e.key)):8===e.keyCode&&T())},onBlur:()=>{v(!1)},onFocus:()=>{v(!0),y(!0)}},void 0,!1,{fileName:d,lineNumber:357,columnNumber:21},void 0),o.exports.jsxDEV("div",{className:"reload-line",children:o.exports.jsxDEV(c,{onClick:F},void 0,!1,{fileName:d,lineNumber:372,columnNumber:25},void 0)},void 0,!1,{fileName:d,lineNumber:371,columnNumber:21},void 0),o.exports.jsxDEV("div",{className:"tip-line "+(h?"":"hide"),children:[o.exports.jsxDEV("div",{children:"点击词块进入输入状态"},void 0,!1,{fileName:d,lineNumber:376,columnNumber:25},void 0),o.exports.jsxDEV("div",{children:"输入正确的拼音字母，然后空格"},void 0,!1,{fileName:d,lineNumber:377,columnNumber:25},void 0),o.exports.jsxDEV("div",{children:["输入状态下",o.exports.jsxDEV("code",{children:"Tab"},void 0,!1,{fileName:d,lineNumber:379,columnNumber:34},void 0),"后回车可以直接刷新"]},void 0,!0,{fileName:d,lineNumber:378,columnNumber:25},void 0)]},void 0,!0,{fileName:d,lineNumber:375,columnNumber:21},void 0)]},void 0,!0,{fileName:d,lineNumber:314,columnNumber:17},void 0),o.exports.jsxDEV(l,{flex:"900px",className:"type-result-box "+(k?"show":""),children:[o.exports.jsxDEV(a,{desc:"WPM",numStr:N.current.wpm,acc:N.current.acc,secs:N.current.time.secs},void 0,!1,{fileName:d,lineNumber:385,columnNumber:21},void 0),o.exports.jsxDEV("div",{className:"reload-line",children:o.exports.jsxDEV(c,{onClick:F},void 0,!1,{fileName:d,lineNumber:392,columnNumber:25},void 0)},void 0,!1,{fileName:d,lineNumber:391,columnNumber:21},void 0)]},void 0,!0,{fileName:d,lineNumber:383,columnNumber:17},void 0)]},void 0,!0,{fileName:d,lineNumber:313,columnNumber:13},void 0)]},void 0,!0,{fileName:d,lineNumber:290,columnNumber:9},void 0)})))}}}))}();
