var _=Object.defineProperty;var C=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var A=(l,s,i)=>s in l?_(l,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[s]=i,S=(l,s)=>{for(var i in s||(s={}))$.call(s,i)&&A(l,i,s[i]);if(C)for(var i of C(s))k.call(s,i)&&A(l,i,s[i]);return l};import{r as u,V as e,a6 as f,X as M,Y as F,$ as L,a7 as P}from"./index.5a6d529b.js";import{w}from"./wordTool.cc85d537.js";import{R as B,T as K}from"./ReloadBtn.cfb1dbd3.js";import{S as X}from"./index.bc3ac91a.js";var r="F:\\Code\\typing-Zero-wyc\\src\\views\\sentence\\Sentence.tsx";const z=32,G=13,O=/^[^\x00-\xff]+$/,U=()=>P(()=>import("./sentences.fca53ad5.js"),[]),J=()=>{const[l,s]=u.exports.useState(!0),i=u.exports.useRef(null),x=u.exports.useRef([]),[a,E]=u.exports.useState([]),[c,D]=u.exports.useState(0),[b,R]=u.exports.useState(5),[g,h]=u.exports.useState(""),[y,j]=u.exports.useState(!1),[p,V]=u.exports.useState(!1),t=u.exports.useRef({cpm:"",right:0,wrong:0,acc:0,time:{begin:0,secs:0}}),I=n=>{n===" "||p||(h(n),O.test(n)&&E(o=>{const m=[...o],d=S({},m[c]);for(let N=0;N<n.length;N++)d.charArr[N]&&(d.charArr[N].isCorrect=n.charAt(N)===d.charArr[N].char);return m.splice(c,1,d),m}))},T=n=>{if(!p&&(t.current.time.begin===0&&(t.current.time.begin=Date.now()),(n.keyCode===G||n.keyCode===z)&&g.length>=a[c].sentence.length))if(c===a.length-1){const o=a.reduce((m,d)=>[...m,...d.charArr],[]);t.current.right=o.filter(m=>m.isCorrect).length,t.current.wrong=o.length-t.current.right,t.current.acc=Math.round(t.current.right/(t.current.right+t.current.wrong)*100),t.current.time.secs=Math.round((Date.now()-t.current.time.begin)/1e3),t.current.cpm=(t.current.right/(t.current.time.secs/60)).toFixed(2),j(!0),setTimeout(()=>{V(!0)},150)}else D(o=>o+1),h("")},v=u.exports.useCallback(()=>{h(""),D(0),t.current={cpm:"",right:0,wrong:0,acc:0,time:{begin:0,secs:0}},x.current=w.shuffle(x.current),E(w.jsonCopy(x.current.slice(0,b)).map(n=>({sentence:n,charArr:Array.from(n).map(o=>({char:o,isCorrect:null}))}))),j(!1),V(!1),setTimeout(()=>{i.current.focus()},10)},[b]);return u.exports.useEffect(()=>{s(!0),U().then(n=>{x.current=n.default,v(),s(!1)})},[v]),e.exports.jsxDEV("div",{className:"Sentence",children:[e.exports.jsxDEV("div",{className:"word-count-radio",children:e.exports.jsxDEV(f.Group,{value:b,size:"small",onChange:n=>{R(n.target.value)},children:[e.exports.jsxDEV(f.Button,{tabIndex:-1,value:5,children:"5"},void 0,!1,{fileName:r,lineNumber:154,columnNumber:21},void 0),e.exports.jsxDEV(f.Button,{tabIndex:-1,value:10,children:"10"},void 0,!1,{fileName:r,lineNumber:157,columnNumber:21},void 0),e.exports.jsxDEV(f.Button,{tabIndex:-1,value:15,children:"15"},void 0,!1,{fileName:r,lineNumber:160,columnNumber:21},void 0),e.exports.jsxDEV(f.Button,{tabIndex:-1,value:20,children:"20"},void 0,!1,{fileName:r,lineNumber:163,columnNumber:21},void 0)]},void 0,!0,{fileName:r,lineNumber:147,columnNumber:17},void 0)},void 0,!1,{fileName:r,lineNumber:146,columnNumber:13},void 0),e.exports.jsxDEV(M,{justify:"center",align:"middle",children:[e.exports.jsxDEV(F,{flex:"900px",className:`type-main-box ${y?"fading":""} ${p?"hide":""}`,children:[e.exports.jsxDEV("div",{className:"sentence-line",children:a[c]&&a[c].charArr.map((n,o)=>e.exports.jsxDEV("code",{className:`char ${n.isCorrect?"correct":n.isCorrect===!1?"wrong":""}`,children:n.char},o,!1,{fileName:r,lineNumber:178,columnNumber:33},void 0))},void 0,!1,{fileName:r,lineNumber:175,columnNumber:21},void 0),e.exports.jsxDEV(X,{spinning:l,tip:"\u52A0\u8F7D\u4E2D",className:"sentence-loading",children:e.exports.jsxDEV("div",{},void 0,!1,{fileName:r,lineNumber:193,columnNumber:25},void 0)},void 0,!1,{fileName:r,lineNumber:192,columnNumber:21},void 0),e.exports.jsxDEV("div",{className:"sentence-input",children:e.exports.jsxDEV(L,{ref:i,value:g,onChange:n=>I(n.target.value),onKeyDown:T},void 0,!1,{fileName:r,lineNumber:196,columnNumber:25},void 0)},void 0,!1,{fileName:r,lineNumber:195,columnNumber:21},void 0),e.exports.jsxDEV("div",{className:"sentence-next",children:a[c+1]&&a[c+1].sentence},void 0,!1,{fileName:r,lineNumber:203,columnNumber:21},void 0),e.exports.jsxDEV("div",{className:"reload-line",children:e.exports.jsxDEV(B,{onClick:v},void 0,!1,{fileName:r,lineNumber:207,columnNumber:25},void 0)},void 0,!1,{fileName:r,lineNumber:206,columnNumber:21},void 0),e.exports.jsxDEV("div",{className:"tip-line",children:[e.exports.jsxDEV("div",{children:"\u70B9\u51FB\u6A2A\u7EBF\u4E0A\u65B9\u8FDB\u5165\u8F93\u5165\u72B6\u6001"},void 0,!1,{fileName:r,lineNumber:210,columnNumber:25},void 0),e.exports.jsxDEV("div",{children:"\u8F93\u5165\u6B63\u786E\u4E2D\u6587\u548C\u7B26\u53F7\uFF0C\u7136\u540E\u7A7A\u683C\u6216\u56DE\u8F66"},void 0,!1,{fileName:r,lineNumber:211,columnNumber:25},void 0),e.exports.jsxDEV("div",{children:["\u8F93\u5165\u72B6\u6001\u4E0B",e.exports.jsxDEV("code",{children:"Tab"},void 0,!1,{fileName:r,lineNumber:213,columnNumber:34},void 0),"\u540E\u56DE\u8F66\u53EF\u4EE5\u76F4\u63A5\u5237\u65B0"]},void 0,!0,{fileName:r,lineNumber:212,columnNumber:25},void 0)]},void 0,!0,{fileName:r,lineNumber:209,columnNumber:21},void 0)]},void 0,!0,{fileName:r,lineNumber:169,columnNumber:17},void 0),e.exports.jsxDEV(F,{flex:"900px",className:`type-result-box ${p?"show":""}`,children:[e.exports.jsxDEV(K,{desc:"\u5B57/\u5206\u949F",numStr:t.current.cpm,acc:t.current.acc,secs:t.current.time.secs},void 0,!1,{fileName:r,lineNumber:219,columnNumber:21},void 0),e.exports.jsxDEV("div",{className:"reload-line",children:e.exports.jsxDEV(B,{onClick:v},void 0,!1,{fileName:r,lineNumber:226,columnNumber:25},void 0)},void 0,!1,{fileName:r,lineNumber:225,columnNumber:21},void 0)]},void 0,!0,{fileName:r,lineNumber:217,columnNumber:17},void 0)]},void 0,!0,{fileName:r,lineNumber:168,columnNumber:13},void 0)]},void 0,!0,{fileName:r,lineNumber:145,columnNumber:9},void 0)};export{J as default};
